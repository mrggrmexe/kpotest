{"ast":null,"code":"import _objectSpread from\"/Users/mrggrm/Documents/GitHub/kpotest/api-gateway/src/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";var _process$env$REACT_AP,_process$env$REACT_AP2;import React,{useCallback,useEffect,useMemo,useRef,useState}from'react';import axios from'axios';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function defaultWsUrl(){if(typeof window==='undefined')return'ws://localhost/ws';const proto=window.location.protocol==='https:'?'wss':'ws';return\"\".concat(proto,\"://\").concat(window.location.host,\"/ws\");}const API_BASE=((_process$env$REACT_AP=process.env.REACT_APP_API_URL)!==null&&_process$env$REACT_AP!==void 0?_process$env$REACT_AP:'').replace(/\\/$/,'');const WS_BASE=((_process$env$REACT_AP2=process.env.REACT_APP_WS_URL)!==null&&_process$env$REACT_AP2!==void 0?_process$env$REACT_AP2:defaultWsUrl()).replace(/\\/$/,'');function App(){const[userId,setUserId]=useState('user123');const[balance,setBalance]=useState(0);const[amount,setAmount]=useState('');const[description,setDescription]=useState('');const[orders,setOrders]=useState([]);const[depositAmount,setDepositAmount]=useState('');const socketsRef=useRef(new Map());const apiUrl=useMemo(()=>API_BASE?API_BASE:'',[]);const wsUrl=useMemo(()=>WS_BASE,[]);const closeAllSockets=useCallback(()=>{for(const[,ws]of socketsRef.current){try{ws.close();}catch(_unused){}}socketsRef.current.clear();},[]);const loadOrders=useCallback(async uid=>{const response=await axios.get(\"\".concat(apiUrl,\"/api/orders\"),{params:{user_id:uid}});const data=Array.isArray(response.data)?response.data:[];setOrders(data);},[apiUrl]);const loadBalance=useCallback(async uid=>{var _response$data$balanc,_response$data;const response=await axios.get(\"\".concat(apiUrl,\"/api/accounts/\").concat(uid,\"/balance\"));const b=Number((_response$data$balanc=(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.balance)!==null&&_response$data$balanc!==void 0?_response$data$balanc:0);setBalance(Number.isFinite(b)?b:0);},[apiUrl]);useEffect(()=>{closeAllSockets();loadOrders(userId).catch(()=>{});loadBalance(userId).catch(()=>{});},[userId,closeAllSockets,loadOrders,loadBalance]);useEffect(()=>{const activeIds=new Set(orders.map(o=>o.id));for(const[id,ws]of socketsRef.current){if(!activeIds.has(id)||ws.readyState===WebSocket.CLOSED||ws.readyState===WebSocket.CLOSING){try{ws.close();}catch(_unused2){}socketsRef.current.delete(id);}}for(const order of orders){if(socketsRef.current.has(order.id))continue;const ws=new WebSocket(wsUrl);ws.onopen=()=>{try{ws.send(JSON.stringify({type:'subscribe',order_id:order.id}));}catch(_unused3){}};ws.onmessage=event=>{try{const msg=JSON.parse(String(event.data));if(msg.type==='order_update'&&typeof msg.order_id==='string'){var _status,_message;const status=(_status=msg.status)!==null&&_status!==void 0?_status:'PROCESSING';const text=(_message=msg.message)!==null&&_message!==void 0?_message:'';toast.info(\"Order \".concat(msg.order_id,\": \").concat(status).concat(text?\" - \".concat(text):''));setOrders(prev=>prev.map(o=>o.id===msg.order_id?_objectSpread(_objectSpread({},o),{},{status}):o));loadBalance(userId).catch(()=>{});}}catch(_unused4){}};ws.onerror=()=>{};ws.onclose=()=>{socketsRef.current.delete(order.id);};socketsRef.current.set(order.id,ws);}},[orders,wsUrl,loadBalance,userId]);useEffect(()=>{return()=>{closeAllSockets();};},[closeAllSockets]);const createOrder=async()=>{const v=Number(amount);if(!Number.isFinite(v)||v<=0){toast.error('Введите корректную сумму');return;}try{const response=await axios.post(\"\".concat(apiUrl,\"/api/orders\"),{user_id:userId,amount:v,description});const created=response!==null&&response!==void 0&&response.data&&typeof response.data==='object'?response.data:null;toast.success('Order created successfully!');setAmount('');setDescription('');if(created!==null&&created!==void 0&&created.id){setOrders(prev=>[created,...prev]);}else{await loadOrders(userId);}}catch(_unused5){toast.error('Failed to create order');}};const createAccount=async()=>{try{await axios.post(\"\".concat(apiUrl,\"/api/accounts\"),{user_id:userId});toast.success('Account created successfully!');await loadBalance(userId);}catch(_unused6){toast.error('Failed to create account');}};const deposit=async()=>{const v=Number(depositAmount);if(!Number.isFinite(v)||v<=0){toast.error('Введите корректную сумму пополнения');return;}try{await axios.post(\"\".concat(apiUrl,\"/api/accounts/\").concat(userId,\"/deposit\"),{amount:v});toast.success('Deposit successful!');setDepositAmount('');await loadBalance(userId);}catch(_unused7){toast.error('Failed to deposit');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u043D\\u0442\\u0435\\u0440\\u043D\\u0435\\u0442-\\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D \\\"\\u0413 oz\\u043E\\u043D\\\"\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0410\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"User ID:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userId,onChange:e=>setUserId(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"balance\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0411\\u0430\\u043B\\u0430\\u043D\\u0441:\"}),\" \",balance.toFixed(2),\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:createAccount,children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0441\\u0447\\u0435\\u0442\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"deposit\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"\\u0421\\u0443\\u043C\\u043C\\u0430 \\u043F\\u043E\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u0438\\u044F\",value:depositAmount,onChange:e=>setDepositAmount(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:deposit,children:\"\\u041F\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u044C\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0421\\u0443\\u043C\\u043C\\u0430:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:amount,onChange:e=>setAmount(e.target.value),placeholder:\"999.99\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:description,onChange:e=>setDescription(e.target.value),placeholder:\"\\u041D\\u043E\\u0443\\u0442\\u0431\\u0443\\u043A\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:createOrder,children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041C\\u043E\\u0438 \\u0437\\u0430\\u043A\\u0430\\u0437\\u044B\"}),orders.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0435\\u0442 \\u0437\\u0430\\u043A\\u0430\\u0437\\u043E\\u0432\"}):/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0421\\u0443\\u043C\\u043C\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0430\\u0442\\u0430\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[order.id.substring(0,8),\"...\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[order.amount,\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsx(\"td\",{children:order.description}),/*#__PURE__*/_jsxs(\"td\",{className:\"status-\".concat(String(order.status).toLowerCase()),children:[order.status==='NEW'&&'Новый',order.status==='PROCESSING'&&'В обработке',order.status==='FINISHED'&&'Оплачен',order.status==='CANCELLED'&&'Отменен',!['NEW','PROCESSING','FINISHED','CANCELLED'].includes(String(order.status))&&String(order.status)]}),/*#__PURE__*/_jsx(\"td\",{children:new Date(order.created_at*1000).toLocaleString()})]},order.id))})]})]})]});}export default App;","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","axios","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","defaultWsUrl","window","proto","location","protocol","concat","host","API_BASE","_process$env$REACT_AP","process","env","REACT_APP_API_URL","replace","WS_BASE","_process$env$REACT_AP2","REACT_APP_WS_URL","App","userId","setUserId","balance","setBalance","amount","setAmount","description","setDescription","orders","setOrders","depositAmount","setDepositAmount","socketsRef","Map","apiUrl","wsUrl","closeAllSockets","ws","current","close","_unused","clear","loadOrders","uid","response","get","params","user_id","data","Array","isArray","loadBalance","_response$data$balanc","_response$data","b","Number","isFinite","catch","activeIds","Set","map","o","id","has","readyState","WebSocket","CLOSED","CLOSING","_unused2","delete","order","onopen","send","JSON","stringify","type","order_id","_unused3","onmessage","event","msg","parse","String","_status","_message","status","text","message","info","prev","_objectSpread","_unused4","onerror","onclose","set","createOrder","v","error","post","created","success","_unused5","createAccount","_unused6","deposit","_unused7","className","children","value","onChange","e","target","toFixed","onClick","placeholder","length","substring","toLowerCase","includes","Date","created_at","toLocaleString"],"sources":["/Users/mrggrm/Documents/GitHub/kpotest/api-gateway/src/src/App.tsx"],"sourcesContent":["import React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport axios from 'axios';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\ntype OrderStatus = 'NEW' | 'PROCESSING' | 'FINISHED' | 'CANCELLED' | string;\n\ntype Order = {\n  id: string;\n  user_id: string;\n  amount: number;\n  description: string;\n  status: OrderStatus;\n  created_at: number;\n};\n\ntype WsMessage =\n  | { type: 'subscribed'; order_id: string }\n  | { type: 'order_update'; order_id: string; status: OrderStatus; message?: string; timestamp?: number }\n  | { [key: string]: any };\n\nfunction defaultWsUrl() {\n  if (typeof window === 'undefined') return 'ws://localhost/ws';\n  const proto = window.location.protocol === 'https:' ? 'wss' : 'ws';\n  return `${proto}://${window.location.host}/ws`;\n}\n\nconst API_BASE = (process.env.REACT_APP_API_URL ?? '').replace(/\\/$/, '');\nconst WS_BASE = (process.env.REACT_APP_WS_URL ?? defaultWsUrl()).replace(/\\/$/, '');\n\nfunction App() {\n  const [userId, setUserId] = useState('user123');\n  const [balance, setBalance] = useState(0);\n  const [amount, setAmount] = useState('');\n  const [description, setDescription] = useState('');\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [depositAmount, setDepositAmount] = useState('');\n\n  const socketsRef = useRef<Map<string, WebSocket>>(new Map());\n\n  const apiUrl = useMemo(() => (API_BASE ? API_BASE : ''), []);\n  const wsUrl = useMemo(() => WS_BASE, []);\n\n  const closeAllSockets = useCallback(() => {\n    for (const [, ws] of socketsRef.current) {\n      try {\n        ws.close();\n      } catch {\n      }\n    }\n    socketsRef.current.clear();\n  }, []);\n\n  const loadOrders = useCallback(async (uid: string) => {\n    const response = await axios.get(`${apiUrl}/api/orders`, { params: { user_id: uid } });\n    const data = Array.isArray(response.data) ? response.data : [];\n    setOrders(data);\n  }, [apiUrl]);\n\n  const loadBalance = useCallback(async (uid: string) => {\n    const response = await axios.get(`${apiUrl}/api/accounts/${uid}/balance`);\n    const b = Number(response.data?.balance ?? 0);\n    setBalance(Number.isFinite(b) ? b : 0);\n  }, [apiUrl]);\n\n  useEffect(() => {\n    closeAllSockets();\n    loadOrders(userId).catch(() => {});\n    loadBalance(userId).catch(() => {});\n  }, [userId, closeAllSockets, loadOrders, loadBalance]);\n\n  useEffect(() => {\n    const activeIds = new Set(orders.map(o => o.id));\n\n    for (const [id, ws] of socketsRef.current) {\n      if (!activeIds.has(id) || ws.readyState === WebSocket.CLOSED || ws.readyState === WebSocket.CLOSING) {\n        try { ws.close(); } catch {}\n        socketsRef.current.delete(id);\n      }\n    }\n\n    for (const order of orders) {\n      if (socketsRef.current.has(order.id)) continue;\n\n      const ws = new WebSocket(wsUrl);\n\n      ws.onopen = () => {\n        try {\n          ws.send(JSON.stringify({ type: 'subscribe', order_id: order.id }));\n        } catch {\n        }\n      };\n\n      ws.onmessage = (event) => {\n        try {\n          const msg: WsMessage = JSON.parse(String(event.data));\n          if (msg.type === 'order_update' && typeof msg.order_id === 'string') {\n            const status = (msg as any).status ?? 'PROCESSING';\n            const text = (msg as any).message ?? '';\n            toast.info(`Order ${msg.order_id}: ${status}${text ? ` - ${text}` : ''}`);\n\n            setOrders(prev =>\n              prev.map(o => (o.id === msg.order_id ? { ...o, status } : o))\n            );\n\n            loadBalance(userId).catch(() => {});\n          }\n        } catch {\n        }\n      };\n\n      ws.onerror = () => {};\n\n      ws.onclose = () => {\n        socketsRef.current.delete(order.id);\n      };\n\n      socketsRef.current.set(order.id, ws);\n    }\n  }, [orders, wsUrl, loadBalance, userId]);\n\n  useEffect(() => {\n    return () => {\n      closeAllSockets();\n    };\n  }, [closeAllSockets]);\n\n  const createOrder = async () => {\n    const v = Number(amount);\n    if (!Number.isFinite(v) || v <= 0) {\n      toast.error('Введите корректную сумму');\n      return;\n    }\n\n    try {\n      const response = await axios.post(`${apiUrl}/api/orders`, {\n        user_id: userId,\n        amount: v,\n        description\n      });\n\n      const created: Order | null = response?.data && typeof response.data === 'object' ? response.data : null;\n\n      toast.success('Order created successfully!');\n      setAmount('');\n      setDescription('');\n\n      if (created?.id) {\n        setOrders(prev => [created, ...prev]);\n      } else {\n        await loadOrders(userId);\n      }\n    } catch {\n      toast.error('Failed to create order');\n    }\n  };\n\n  const createAccount = async () => {\n    try {\n      await axios.post(`${apiUrl}/api/accounts`, { user_id: userId });\n      toast.success('Account created successfully!');\n      await loadBalance(userId);\n    } catch {\n      toast.error('Failed to create account');\n    }\n  };\n\n  const deposit = async () => {\n    const v = Number(depositAmount);\n    if (!Number.isFinite(v) || v <= 0) {\n      toast.error('Введите корректную сумму пополнения');\n      return;\n    }\n\n    try {\n      await axios.post(`${apiUrl}/api/accounts/${userId}/deposit`, { amount: v });\n      toast.success('Deposit successful!');\n      setDepositAmount('');\n      await loadBalance(userId);\n    } catch {\n      toast.error('Failed to deposit');\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <ToastContainer />\n\n      <h1>Интернет-магазин \"Г ozон\"</h1>\n\n      <div className=\"section\">\n        <h2>Аккаунт</h2>\n        <div className=\"form-group\">\n          <label>User ID:</label>\n          <input\n            type=\"text\"\n            value={userId}\n            onChange={(e) => setUserId(e.target.value)}\n          />\n        </div>\n        <div className=\"balance\">\n          <strong>Баланс:</strong> {balance.toFixed(2)} руб.\n        </div>\n        <div className=\"buttons\">\n          <button onClick={createAccount}>Создать счет</button>\n          <div className=\"deposit\">\n            <input\n              type=\"number\"\n              placeholder=\"Сумма пополнения\"\n              value={depositAmount}\n              onChange={(e) => setDepositAmount(e.target.value)}\n            />\n            <button onClick={deposit}>Пополнить</button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"section\">\n        <h2>Создать заказ</h2>\n        <div className=\"form-group\">\n          <label>Сумма:</label>\n          <input\n            type=\"number\"\n            value={amount}\n            onChange={(e) => setAmount(e.target.value)}\n            placeholder=\"999.99\"\n          />\n        </div>\n        <div className=\"form-group\">\n          <label>Описание:</label>\n          <input\n            type=\"text\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            placeholder=\"Ноутбук\"\n          />\n        </div>\n        <button onClick={createOrder}>Создать заказ</button>\n      </div>\n\n      <div className=\"section\">\n        <h2>Мои заказы</h2>\n        {orders.length === 0 ? (\n          <p>Нет заказов</p>\n        ) : (\n          <table>\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>Сумма</th>\n                <th>Описание</th>\n                <th>Статус</th>\n                <th>Дата</th>\n              </tr>\n            </thead>\n            <tbody>\n              {orders.map((order) => (\n                <tr key={order.id}>\n                  <td>{order.id.substring(0, 8)}...</td>\n                  <td>{order.amount} руб.</td>\n                  <td>{order.description}</td>\n                  <td className={`status-${String(order.status).toLowerCase()}`}>\n                    {order.status === 'NEW' && 'Новый'}\n                    {order.status === 'PROCESSING' && 'В обработке'}\n                    {order.status === 'FINISHED' && 'Оплачен'}\n                    {order.status === 'CANCELLED' && 'Отменен'}\n                    {!['NEW', 'PROCESSING', 'FINISHED', 'CANCELLED'].includes(String(order.status)) && String(order.status)}\n                  </td>\n                  <td>{new Date(order.created_at * 1000).toLocaleString()}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}